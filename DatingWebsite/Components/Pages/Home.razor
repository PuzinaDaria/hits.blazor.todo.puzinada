@page "/"

<div style="background: linear-gradient(135deg, #e75480 0%, #ff9fcf 100%); border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); color:  white; padding: 80px 0;">
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
        <div style="display: flex; align-items: center; gap: 50px;">
            <div style="flex: 1;">
                <h1 style="font-size: 48px; margin-bottom: 20px;">Найди свою половинку</h1>
                <p style="font-size: 20px; margin-bottom: 30px; opacity: 0.9;">
                    Платформа для поиска новых знакомств, друзей и серьезных отношений
                </p>

                <!-- Динамические кнопки -->
                <div id="homeButtons" style="display: flex; gap: 15px;">
                    <!-- Кнопки будут полностью заменены через JavaScript -->
                </div>
            </div>
            <div style="flex: 1; text-align: center;">
                <div style="font-size: 120px;">❤️</div>
            </div>
        </div>
    </div>
</div>

<!-- Блок информации о разработчике -->
<div style="max-width: 1200px; margin: 50px auto; padding: 0 20px;">
    <div style="background: white; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); padding: 30px; display: flex; align-items: center; gap: 40px;">
        <!-- Место для фото - ЗДЕСЬ ВСТАВЬТЕ СВОЕ ФОТО -->
        <div style="flex-shrink: 0;">
            <div style="width: 200px; height: 200px; border-radius: 12px; overflow: hidden; border: 3px solid #e75480;">
                <!-- ВАШЕ ФОТО: замените src на путь к вашему фото -->
                <img src="/images/daria-puzina.jpg" alt="Пузина Дарья Алексеевна"
                     style="width: 100%; height: 100%; object-fit: cover;" />
            </div>
            <p style="text-align: center; margin-top: 10px; color: #666; font-size: 14px;">
                Разработчик проекта
            </p>
        </div>

        <!-- Информация о разработчике -->
        <div style="flex: 1;">
            <h2 style="color: #2c3e50; margin-bottom: 20px; border-bottom: 3px solid #e75480; padding-bottom: 10px;">
                О разработчике
            </h2>

            <div style="margin-bottom: 15px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                    <span style="color: #e75480; font-size: 18px;">👤</span>
                    <span style="font-weight: 600; color: #333;">ФИО:</span>
                </div>
                <div style="color: #666; font-size: 18px; padding-left: 28px;">
                    Пузина Дарья Алексеевна
                </div>
            </div>

            <div style="margin-bottom: 15px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                    <span style="color: #e75480; font-size: 18px;">🎓</span>
                    <span style="font-weight: 600; color: #333;">Группа:</span>
                </div>
                <div style="color: #666; font-size: 18px; padding-left: 28px;">
                    ИИПб-24-1
                </div>
            </div>

            <div style="margin-bottom: 15px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                    <span style="color: #e75480; font-size: 18px;">📋</span>
                    <span style="font-weight: 600; color: #333;">Описание проекта:</span>
                </div>
                <div style="color: #666; font-size: 18px; padding-left: 28px; line-height: 1.5;">
                    Веб-приложение для знакомств с возможностью создания профиля, поиска по интересам и общения в чатах.
                </div>
            </div>

            <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid #eee;">
                <div style="display: flex; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 8px; color: #666;">
                        <span>⚙️</span>
                        <span>Стек технологий:</span>
                    </div>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <span style="background: #e75480; color: white; padding: 5px 12px; border-radius: 20px; font-size: 14px;">
                            Blazor
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div style="max-width: 1200px; margin: 50px auto; padding: 0 20px;">
    <h2 style="text-align: center; margin-bottom: 50px; color: #2c3e50;">Почему выбирают нас?</h2>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
        <!-- Карточка 1 -->
        <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 50px; color: #e75480; margin-bottom: 20px;">👥</div>
            <h3 style="color: #2c3e50; margin-bottom: 15px;">Большая аудитория</h3>
            <p style="color: #666;">Тысячи пользователей ждут знакомства с вами</p>
        </div>

        <!-- Карточка 2 -->
        <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 50px; color: #e75480; margin-bottom: 20px;">🔒</div>
            <h3 style="color: #2c3e50; margin-bottom: 15px;">Безопасность</h3>
            <p style="color: #666;">Ваши данные защищены и конфиденциальны</p>
        </div>

        <!-- Карточка 3 -->
        <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 50px; color: #e75480; margin-bottom: 20px;">💞</div>
            <h3 style="color: #2c3e50; margin-bottom: 15px;">Умный поиск</h3>
            <p style="color: #666;">Находите людей по интересам и предпочтениям</p>
        </div>
    </div>
</div>

<script>
    // Функция обновления кнопок на главной странице
    function updateHomeButtons() {
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        const homeButtons = document.getElementById('homeButtons');

        console.log('Обновление кнопок главной страницы. Авторизован:', isLoggedIn);

        if (!homeButtons) return;

        if (isLoggedIn) {
            // Получаем данные пользователя для приветствия
            let userName = 'дорогой пользователь';
            try {
                const userJson = localStorage.getItem('currentUser');
                if (userJson) {
                    const user = JSON.parse(userJson);
                    userName = user.firstName || 'дорогой пользователь';
                }
            } catch (error) {
                console.error('Ошибка при получении данных пользователя:', error);
            }

            // Кнопки для авторизованных пользователей
            homeButtons.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: 15px; width: 100%;">
                    <!-- Приветственное сообщение -->
                    <div style="padding: 20px; background: rgba(255,255,255,0.2); border-radius: 12px; margin-bottom: 10px;">
                        <h3 style="margin: 0 0 10px 0; font-size: 24px;">👋 Привет, ${userName}!</h3>
                        <p style="margin: 0; opacity: 0.9;">Рады видеть вас снова! Что вы хотите сделать?</p>
                    </div>

                    <!-- Основные кнопки действий -->
                    <div style="display: flex; gap: 15px;">
                        <a href="/search" style="flex: 1; background: white; color: #e75480; padding: 15px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>🔍</span>
                            <span>Найти людей</span>
                        </a>

                        <a href="/messages" style="flex: 1; background: #28a745; color: white; padding: 15px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>💬</span>
                            <span>Мои сообщения</span>
                        </a>
                    </div>

                    <!-- Дополнительные кнопки -->
                    <div style="display: flex; gap: 15px;">
                        <a href="/profile" style="flex: 1; background: #17a2b8; color: white; padding: 12px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>👤</span>
                            <span>Мой профиль</span>
                        </a>
                    </div>
                </div>
            `;

        } else {
            // Кнопки для неавторизованных пользователей
            homeButtons.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: 15px; width: 100%;">
                    <!-- Приглашение зарегистрироваться -->
                    <div style="padding: 20px; background: rgba(255,255,255,0.2); border-radius: 12px; margin-bottom: 10px;">
                        <h3 style="margin: 0 0 10px 0; font-size: 24px;">🌟 Присоединяйтесь к нам!</h3>
                        <p style="margin: 0; opacity: 0.9;">Начните знакомиться с новыми людьми уже сегодня</p>
                    </div>

                    <!-- Основные кнопки -->
                    <div style="display: flex; gap: 15px;">
                        <a href="/search" style="flex: 1; background: white; color: #e75480; padding: 15px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>🔍</span>
                            <span>Найти людей</span>
                        </a>

                        <a href="/register" style="flex: 1; background: white; color: #e75480; padding: 15px 20px; border-radius: 8px; text-decoration: none; font-weight: bold; text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>📝</span>
                            <span>Регистрация</span>
                        </a>
                    </div>

                    <!-- Кнопка входа -->
                    <div style="text-align: center;">
                        <p style="margin: 5px 0 10px 0; opacity: 0.8;">Уже есть аккаунт?</p>
                        <a href="/login" style="background: transparent; border: 2px solid white; color: white; padding: 12px 40px; border-radius: 8px; text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; justify-content: center; gap: 10px;">
                            <span>🔑</span>
                            <span>Войти в систему</span>
                        </a>
                    </div>
                </div>
            `;
        }
    }

    // Глобальная функция выхода для использования из других файлов
    window.logoutUser = function() {
        if (confirm('Вы уверены, что хотите выйти?')) {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('isLoggedIn');

            // Обновляем меню
            if (typeof updateMenu !== 'undefined') {
                updateMenu();
            }

            // Обновляем верхнюю панель
            if (typeof updateTopBar !== 'undefined') {
                updateTopBar();
            }

            // Обновляем кнопки на главной странице
            updateHomeButtons();

            // Перезагружаем страницу
            setTimeout(() => {
                window.location.href = '/';
            }, 100);
        }
    };

    // Вызываем при загрузке страницы
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Главная страница загружена');
        updateHomeButtons();

        // Обновляем при каждом изменении localStorage (вход/выход)
        window.addEventListener('storage', function(event) {
            if (event.key === 'isLoggedIn' || event.key === 'currentUser') {
                console.log('Обнаружено изменение в localStorage, обновляем кнопки');
                updateHomeButtons();
            }
        });

        // Обновляем при каждом клике (на всякий случай)
        document.addEventListener('click', function() {
            // Проверяем только каждые 500ms чтобы не перегружать
            if (!window.lastHomeUpdate || Date.now() - window.lastHomeUpdate > 500) {
                updateHomeButtons();
                window.lastHomeUpdate = Date.now();
            }
        });
    });
</script>